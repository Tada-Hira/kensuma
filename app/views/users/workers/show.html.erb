<% provide(:title, "作業員情報詳細") %>

<div class="card">
  <div class="card-body table-responsive p-0">
    <table class="table table-hover text-nowrap">
      <tbody>
        <tr>
          <th><%= Worker.human_attribute_name(:name) %></th>
          <td><%= @worker.name %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:name_kana) %></th>
          <td><%= @worker.name_kana %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:country) %></th>
          <td><%= @worker.country %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:sex) %></th>
          <td><%= @worker.sex_i18n %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:my_address) %></th>
          <td><%= @worker.my_address %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:my_phone_number) %></th>
          <td><%= @worker.my_phone_number %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:email) %></th>
          <td><%= @worker.email %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:family_name) %></th>
          <td><%= @worker.family_name %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:relationship) %></th>
          <td><%= @worker.relationship %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:family_address) %></th>
          <td><%= @worker.family_address %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:family_phone_number) %></th>
          <td><%= @worker.family_phone_number %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:birth_day_on) %></th>
          <td><%= @worker.birth_day_on %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:abo_blood_type) %></th>
          <td><%= @worker.abo_blood_type_i18n %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:rh_blood_type) %></th>
          <td><%= @worker.rh_blood_type_i18n %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:hiring_on) %></th>
          <td><%= @worker.hiring_on %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:experience_term_before_hiring) %></th>
          <td><%= @worker.experience_term_before_hiring %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:blank_term) %></th>
          <td><%= @worker.blank_term %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:employment_contract) %></th>
          <td><%= @worker.employment_contract_i18n %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= Worker.human_attribute_name(:career_up_id) %></th>
          <td><%= @worker.career_up_id %></td>
          <td></td>
          <td></td>
        </tr>

        <!-- 外国人労働者用表示 -->
        <% unless @worker.country == "日本" %>
          <tr>
            <th><%= Worker.human_attribute_name(:status_of_residence) %></th>
            <td><%= @worker.status_of_residence_i18n %></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <th><%= Worker.human_attribute_name(:maturity_date) %></th>
            <td><%= wareki(@worker.maturity_date) %></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <th><%= Worker.human_attribute_name(:confirmed_check) %></th>
            <td><%= @worker.status_of_residence_i18n %></td>
            <td></td>
            <td></td>
          </tr>
        <% end %>
        
        <!-- worker_liceseここから -->
        <tr bgcolor="#dee2e6">
          <th></th>
          <th><%= License.human_attribute_name(:name) %></th>
          <th><%= WorkerLicense.human_attribute_name(:got_on) %></th>
          <th><%= WorkerLicense.human_attribute_name(:images) %></th>
        </tr>
        <% @worker.worker_licenses.each do |worker_license| %>
          <tr>
            <% if @worker.licenses.first.id == worker_license.license_id %>
              <th><%= WorkerLicense.human_attribute_name(:license_id) %></th>
            <% else %>
              <th></th>
            <% end %>
            <td><%= worker_license.license.name %></td>
            <td><%= worker_license.got_on %></td>
            <td>
              <% worker_license.images.each do |image| %>
                <%= image_tag(image.url) %>
              <% end %>
            </td>
          </tr>
        <% end %>
        <!-- worker_liceseここまで -->
        <!-- worker_skill_trainingここから -->
        <tr bgcolor="#dee2e6">
          <th></th>
          <th><%= SkillTraining.human_attribute_name(:name) %></th>
          <th><%= WorkerSkillTraining.human_attribute_name(:got_on) %></th>
          <th><%= WorkerSkillTraining.human_attribute_name(:images) %></th>
        </tr>
        <% @worker.worker_skill_trainings.each do |worker_skill_training| %>
          <tr>
            <% if @worker.skill_trainings.first.id == worker_skill_training.skill_training_id %>
              <th><%= WorkerSkillTraining.human_attribute_name(:skill_training_id) %></th>
            <% else %>
              <th></th>
            <% end %>
            <td><%= worker_skill_training.skill_training.name %></td>
            <td><%= worker_skill_training.got_on %></td>
            <td>
              <% worker_skill_training.images.each do |image| %>
                <%= image_tag(image.url) %>
              <% end %>
            </td>
          </tr>
        <% end %>
        <!-- worker_skill_trainingここまで -->
        <!-- worker_special_educationここから -->
        <tr bgcolor="#dee2e6">
          <th></th>
          <th><%= SpecialEducation.human_attribute_name(:name) %></th>
          <th><%= WorkerSpecialEducation.human_attribute_name(:got_on) %></th>
          <th><%= WorkerSpecialEducation.human_attribute_name(:images) %></th>
        </tr>
        <% @worker.worker_special_educations.each do |worker_special_education| %>
          <tr>
            <% if @worker.special_educations.first.id == worker_special_education.special_education_id %>
              <th><%= WorkerSpecialEducation.human_attribute_name(:special_education_id) %></th>
            <% else %>
              <th></th>
            <% end %>
            <td><%= worker_special_education.special_education.name %></td>
            <td><%= worker_special_education.got_on %></td>
            <td>
              <% worker_special_education.images.each do |image| %>
                <%= image_tag(image.url) %>
              <% end %>
            </td>
          </tr>
        <% end %>
        <!-- worker_medicalここから -->
        <tr bgcolor="#dee2e6">
          <th colspan="4"><%= WorkerMedical.human_attribute_name(:id) %></th>
        </tr>
        <tr>
          <th><%= WorkerMedical.human_attribute_name(:is_med_exam) %></th>
          <td><%= @worker.worker_medical.is_med_exam_i18n %><td>
          <td></td>
        </tr>
        <tr>
          <th><%= WorkerMedical.human_attribute_name(:health_condition) %></th>
          <td><%= @worker.worker_medical.health_condition_i18n %><td>
          <td></td>
        </tr>
        <tr>
          <th><%= WorkerMedical.human_attribute_name(:med_exam_on) %></th>
          <td><%= @worker.worker_medical.med_exam_on %><td>
          <td></td>
        </tr>
        <tr>
          <th><%= WorkerMedical.human_attribute_name(:max_blood_pressure) %></th>
          <td><%= @worker.worker_medical.max_blood_pressure %><td>
          <td></td>
        </tr>
        <tr>
          <th><%= WorkerMedical.human_attribute_name(:min_blood_pressure) %></th>
          <td><%= @worker.worker_medical.min_blood_pressure %><td>
          <td></td>
        </tr>
        <tr>
          <th><%= WorkerMedical.human_attribute_name(:special_med_exam_on) %></th>
          <td><%= @worker.worker_medical.special_med_exam_on %><td>
          <td></td>
        </tr>
        <!-- worker_medicalここまで -->
        <!-- worker_examここから -->
        <tr bgcolor="#dee2e6">
          <th></th>
          <th><%= SpecialMedExam.human_attribute_name(:name) %></th>
          <th><%= WorkerExam.human_attribute_name(:got_on) %></th>
          <th><%= WorkerExam.human_attribute_name(:images) %></th>
        </tr>
        <% @worker.worker_medical.worker_exams.each do |worker_exam| %>
          <tr>
            <% if @worker.worker_medical.special_med_exams.first.id == worker_exam.special_med_exam_id %>
              <th><%= WorkerExam.human_attribute_name(:special_med_exam_id) %></th>
            <% else %>
              <th></th>
            <% end %>
            <td><%= worker_exam.special_med_exam.name %></td>
            <td><%= worker_exam.got_on %></td>
            <td>
              <% worker_exam.images.each do |image| %>
                <%= image_tag(image.url) %>
              <% end %>
            </td>
          </tr>
        <% end %>
        <!-- worker_examここまで -->
        <!-- worker_insuranceここから -->
        <tr bgcolor="#dee2e6">
          <th colspan="4"><%= WorkerInsurance.human_attribute_name(:id) %></th>
        </tr>
        <tr>
          <th><%= WorkerInsurance.human_attribute_name(:health_insurance_type) %></th>
          <td><%= @worker.worker_insurance.health_insurance_type_i18n %></td>
          <td></td>
          <td></td>
        </tr>
        <% if @worker.worker_insurance && (@worker.worker_insurance.health_insurance_type == ('health_insurance_association' || 'construction_national_health_insurance')) %>
          <tr>
            <th><%= WorkerInsurance.human_attribute_name(:health_insurance_name) %></th>
            <td><%= @worker.worker_insurance.health_insurance_name %></td>
            <td></td>
            <td></td>
          </tr>
        <% end %>
        <tr>
          <th><%= WorkerInsurance.human_attribute_name(:pension_insurance_type) %></th>
          <td><%= @worker.worker_insurance.pension_insurance_type_i18n %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= WorkerInsurance.human_attribute_name(:employment_insurance_type) %></th>
          <td><%= @worker.worker_insurance.employment_insurance_type_i18n %></td>
          <td></td>
          <td></td>
        </tr>
        <% if @worker.worker_insurance && (@worker.worker_insurance.employment_insurance_type == 'insured') %>
          <tr>
            <th><%= WorkerInsurance.human_attribute_name(:employment_insurance_number) %></th>
            <td><%= @worker.worker_insurance.employment_insurance_number %></td>
            <td></td>
            <td></td>
          </tr>
        <% end %>
        <tr>
          <th><%= WorkerInsurance.human_attribute_name(:has_labor_insurance) %></th>
          <td><%= @worker.worker_insurance.has_labor_insurance_i18n %></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <th><%= WorkerInsurance.human_attribute_name(:severance_pay_mutual_aid_type) %></th>
          <td><%= @worker.worker_insurance.severance_pay_mutual_aid_type_i18n %></td>
          <td></td>
          <td></td>
        </tr>
        <% if @worker.worker_insurance && (@worker.worker_insurance.severance_pay_mutual_aid_type == 'other') %>
          <tr>
            <th><%= WorkerInsurance.human_attribute_name(:severance_pay_mutual_aid_name) %></th>
            <td><%= @worker.worker_insurance.severance_pay_mutual_aid_name %></td>
            <td></td>
            <td></td>
          </tr>
        <% end %>
        <!-- worker_insuranceここまで -->
      </tbody>
    </table>
  </div>
  <div class="card-footer">
    <%= link_to "編集", edit_users_worker_path(@worker), class: "btn btn-md btn-block btn-success" %>
    <%= link_to "削除", users_worker_path(@worker), method: :delete, data: { confirm: "#{@worker.name}を削除します。本当によろしいですか？" }, class: "btn btn-md btn-danger btn-block" %>
    <%= link_to "一覧画面へ", users_workers_path, class: "btn btn-md btn-block btn-default" %>
  </div>
</div>
